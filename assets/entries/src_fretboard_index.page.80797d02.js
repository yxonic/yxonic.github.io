import{v as S}from"../chunks/chunk-26edff3a.js";import{s as N,y as c,t as l,u as i,x as n,F as p,z as y,A as _,B as O,C as k,D as q,v as w,E as b,G as X}from"../chunks/chunk-d006c356.js";function E(m,t){if(!m)throw Error(t)}const H=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],U=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];class W{constructor(t,a){this.name=t,this.pitch=a||0}transpose(t,a){let u=this.name.slice(0,-1),g=Number(this.name.slice(-1));const f=a?U:H;let o=f.indexOf(u);for(let d=0;d<t;d++)o=(o+1)%12,o===0&&g++;return console.log(f[o]),new W(f[o]+String(g))}}class L{constructor(t,a,u,g,f){this.string=t,this.fret=a,this.tag=u,this.fg=g,this.bg=f}getNote(t,a){const u=t[t.length-this.string];return new W(u).transpose(this.fret,a)}}const T={guitar6:["E2","A2","D3","G3","B3","E4"],guitar7:["B1","E2","A2","D3","G3","B3","E4"],guitarDropD:["D2","A2","D3","G3","B3","E4"],bass4:["E1","A1","D2","G2"],bass5:["B0","E1","A1","D2","G2"],ukulele:["C4","G3","E3","A2"]},I={guitar6:[10,13,17,26,36,46],guitar7:[10,13,17,26,36,46,59],guitarDropD:[10,13,17,26,36,46],bass4:[45,65,80,100],bass5:[45,65,80,100,130],ukulele:[28,32,40,28]};class M{constructor(t){this.svgHeight=t.height,this.svgWidth=t.width,this.tuning=T[t.instrument],this.useFlats=this.tuning.filter(v=>v.includes("b")).length>0,this.stringGauges=t.stringHasWidth?I[t.instrument]:void 0,this.strings=this.tuning.length,this.fretless=!!t.fretless,this.minFret=t.minFret??0,this.maxFret=t.maxFret??24,this.evenFactor=t.evenFactor??0;const a=t.padX??10,u=t.padY??10,g=t.nutWidth??0;E(this.minFret<=this.maxFret,"must contain at least one fret"),this.offsetX=a,this.minFret===0&&(this.offsetX+=g),this.scaleLength=1;const f=this.minFret>0?this.minFret-1:0,o=this.maxFret;this.frets=Array.from({length:o-f+1},(v,e)=>e+f);const d=this.getFretX(f),x=this.getFretX(o);let h=this.svgWidth-this.offsetX-a;E(h>10,"svg too small"),this.scaleLength=h/(x-d),this.offsetX-=this.getFretX(f,0),this.stringY=[];let s=u;const r=this.stringGauges?this.stringGauges.slice(0,this.strings).map(v=>Math.sqrt(v)).reduce((v,e)=>v+e):0;this.stringGap=(this.svgHeight-2*u-r)/(this.strings-1);for(let v=0;v<this.strings;++v)this.stringY.push(s),this.stringGauges&&(s+=Math.sqrt(this.stringGauges[v])),s+=this.stringGap;t.reverseStrings&&(this.stringY=this.stringY.reverse()),this.colorMap=t.colorMap??{default:{fg:"black",bg:"white"},highlight:{fg:"white",bg:"black"},inactive:{fg:"black",bg:"#999999"},selected:{fg:"white",bg:"red"}}}getFretX(t,a){if(a===void 0&&(a=this.offsetX),this.evenFactor>=.95)return this.scaleLength*.5/12*t+a;const u=.5*this.scaleLength/(1-1/(2-this.evenFactor));return u-u/(2-this.evenFactor)**(t/12)+a}getStringY(t){return this.stringY[t-1]}getFretSpaceX(t){return(this.getFretX(t)+this.getFretX(t-1)+4)/2}getStringSpaceY(t){return this.getStringY(t)+this.stringGap/2}getNote(t,a,u,g){const{fg:f,bg:o}=this.colorMap[g??"default"],d=new L(t,a,u??"",f,o),x=d.getNote(this.tuning,this.useFlats);u===void 0&&(d.tag=x.name.slice(0,-1));const h=this.fretless||a===0?this.getFretX(a):this.getFretSpaceX(a),s=this.getStringY(t);return{note:x,tag:d,x:h,y:s}}}const j=["height","width","viewBox"],J=O('<linearGradient id="board" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#100"></stop><stop offset="0.8%" stop-color="#877"></stop><stop offset="1.6%" stop-color="#402028"></stop><stop offset="98.5%" stop-color="#644"></stop><stop offset="99.5%" stop-color="#988"></stop><stop offset="100%" stop-color="#402028"></stop></linearGradient><filter id="shadow" x="-20%" y="-20%" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="0" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter><linearGradient id="box-short" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="8%" stop-color="#bba"></stop><stop offset="95%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="box-long" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="3%" stop-color="#bba"></stop><stop offset="98%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="fret" x1="0" y1="0" x2="100%" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#ccc"></stop><stop offset="100%" stop-color="#888"></stop></linearGradient><linearGradient id="string" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#eee"></stop><stop offset="100%" stop-color="#aaa"></stop></linearGradient>',6),K=["id","height"],P=["height"],Q={x:"0"},R=["width","height"],Z={key:0},tt=["cx","cy"],et={key:1},st=["cx","cy"],rt=["cx","cy"],lt={key:1},it=["cx","cy"],nt={key:1},at=["cx","cy"],ot=["cx","cy"],ut={key:2},ht=["width","height","x"],ct=["width","height"],gt=["d"],dt=["d"],ft={filter:"url(#shadow)"},vt=["y"],pt=["width","height","fill"],yt=["x"],mt=["height","width"],xt=["y","height","width"],_t=["y","height","width"],Ft=["cx","cy","fill"],kt=["x","y","fill","stroke"],St=40,G=40,B=20,F=6,wt=35,A=N({__name:"FB",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass4"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:0},nutWidth:{default:40},fretSize:{default:10},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1},tags:{}},setup(m){const t=m,a=[3,5,7,9,12,15,17,19,21,24],u=c(()=>h.value.strings),g=c(()=>t.height),f=c(()=>t.width),o=c(()=>400/t.scale),d=c(()=>o.value/t.height*t.width),x=c(()=>(t.tags??[]).map(r=>h.value.getNote(r.string,r.fret,r.tag,r.style))),h=c(()=>new M({width:d.value,height:o.value,instrument:t.instrument,minFret:t.minFret,maxFret:t.maxFret,padX:St,padY:G,nutWidth:t.nutWidth,evenFactor:t.evenFactor,stringHasWidth:!0,fretless:t.fretless}));function s(r){let v=h.value.stringGauges[r-1];return Math.sqrt(v)}return(r,v)=>(l(),i("svg",{height:g.value,width:f.value,viewBox:"0 0 "+d.value+" "+o.value},[n("defs",null,[J,(l(!0),i(p,null,y(h.value.strings,e=>(l(),i("pattern",{id:"ring"+e,width:"3",height:s(e),patternUnits:"userSpaceOnUse"},[n("rect",{x:"0",y:"0",width:"3",height:s(e),fill:"url(#string)",stroke:"#333"},null,8,P)],8,K))),256))]),(l(),i("svg",Q,[n("rect",{width:d.value,height:o.value,fill:"url(#board)"},null,8,R)])),(l(),i("svg",null,[!r.fretless&&r.marker?(l(),i("svg",Z,[(l(),i(p,null,y(a,e=>n("g",null,[e%12!==0?(l(),i("circle",{key:0,cx:h.value.getFretSpaceX(e),cy:o.value/2,r:B,fill:"#ddd"},null,8,tt)):(l(),i("g",et,[n("circle",{cx:h.value.getFretSpaceX(e),cy:o.value*.25,r:B,fill:"#ddd"},null,8,st),n("circle",{cx:h.value.getFretSpaceX(e),cy:o.value*.75,r:B,fill:"#ddd"},null,8,rt)]))])),64))])):_("",!0),r.fretless&&r.marker?(l(),i("svg",lt,[(l(),i(p,null,y(a,e=>n("g",null,[e%12!==0?(l(),i("circle",{key:0,cx:h.value.getFretX(e),cy:o.value-F-10,r:F,fill:"#ddd"},null,8,it)):(l(),i("g",nt,[n("circle",{cx:h.value.getFretX(e)-F*2,cy:o.value-F-10,r:F,fill:"#ddd"},null,8,at),n("circle",{cx:h.value.getFretX(e)+F*2,cy:o.value-F-10,r:F,fill:"#ddd"},null,8,ot)]))])),64))])):_("",!0),r.fretless?_("",!0):(l(),i("svg",ut,[(l(),i(p,null,y(24,e=>n("svg",{width:r.fretSize,height:o.value,x:h.value.getFretX(e)-r.fretSize/2},[n("rect",{width:r.fretSize,height:o.value,fill:"url(#fret)"},null,8,ct),n("path",{fill:"#ccc",d:"M0,0 C0,10 "+r.fretSize+",10 "+r.fretSize+",0"},null,8,gt),n("path",{fill:"#888",d:"M0,"+o.value+" C0,"+(o.value-10)+" "+r.fretSize+","+(o.value-10)+" "+r.fretSize+","+o.value},null,8,dt)],8,ht)),64))]))])),(l(),i("svg",ft,[(l(!0),i(p,null,y(h.value.strings,e=>(l(),i("svg",{y:h.value.getStringY(e)},[n("rect",{width:d.value,height:s(e),fill:s(e)>5?"url(#ring"+e+")":"url(#string)"},null,8,pt)],8,vt))),256))])),(l(),i("svg",{x:h.value.offsetX-r.nutWidth},[n("rect",{y:"0",height:G-2,fill:"url(#box-short)",width:r.nutWidth,rx:"5",ry:"5"},null,8,mt),(l(!0),i(p,null,y(u.value-1,e=>(l(),i("rect",{y:h.value.getStringY(e)+s(e)+4,height:h.value.stringGap-8,fill:"url(#box-long)",width:r.nutWidth,rx:"5",ry:"5"},null,8,xt))),256)),n("rect",{y:h.value.getStringY(u.value)+s(u.value)+4,height:G-6,fill:"url(#box-short)",width:r.nutWidth,rx:"5",ry:"5"},null,8,_t)],8,yt)),(l(!0),i(p,null,y(x.value,e=>(l(),i("g",null,[n("circle",{cx:e.x,cy:e.y+s(e.tag.string)/2,r:wt,fill:e.tag.bg,filter:"url(#shadow)"},null,8,Ft),n("text",{x:e.x,y:e.y+s(e.tag.string)/2+12,"text-anchor":"middle",fill:e.tag.fg,stroke:e.tag.fg,style:{"font-size":"36px"}},k(e.tag.tag),9,kt)]))),256))],8,j))}}),bt=["height","width","viewBox"],Xt=["x1","x2","y1","y2"],$t={key:0},Yt=["x"],Gt=["y1","y2"],Bt={key:1},zt=["x","y"],Dt={key:2},Nt=["cx","cy"],Wt={key:1},Mt=["cx","cy"],Et=["cx","cy"],At=["x1","x2","y1","y2"],Ct=["cx","cy","r","fill"],Vt=["cx","cy","fill"],Ot=["x","y","fill","stroke"],qt=40,Ht=80,$=30,z=20,C=30,Ut=N({__name:"FBDiagram",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass4"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:1},marker:{type:Boolean,default:!0},fretNote:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1},tags:{}},setup(m){const t=m,a=c(()=>s.value.strings),u=c(()=>s.value.frets),g=c(()=>t.height),f=c(()=>t.width),o=c(()=>400/t.scale),d=c(()=>o.value/t.height*t.width),x=c(()=>[3,5,7,9,12,15,17,19,21,24].filter(r=>r>=t.minFret&&r<=t.maxFret)),h=c(()=>(t.tags??[]).map(r=>s.value.getNote(r.string,r.fret,r.tag,r.style))),s=c(()=>new M({width:d.value,height:o.value,instrument:t.instrument,minFret:t.minFret,maxFret:t.maxFret,padX:qt,padY:Ht,nutWidth:$,evenFactor:t.evenFactor,fretless:t.fretless}));return(r,v)=>(l(),i("svg",{height:g.value,width:f.value,viewBox:"0 0 "+d.value+" "+o.value},[(l(),i("svg",null,[n("line",{x1:s.value.getFretX(0)-$/2+4,x2:s.value.getFretX(0)-$/2+4,y1:s.value.getStringY(1)-2,y2:s.value.getStringY(a.value)+2,stroke:"black","stroke-width":$},null,8,Xt)])),r.fretless?_("",!0):(l(),i("g",$t,[(l(!0),i(p,null,y(u.value,e=>(l(),i("svg",{x:s.value.getFretX(e)},[n("line",{x1:"0",x2:"0",y1:s.value.getStringY(1)-2,y2:s.value.getStringY(a.value)+2,stroke:"black","stroke-width":8},null,8,Gt)],8,Yt))),256))])),r.fretNote&&r.minFret>1?(l(),i("g",Bt,[n("text",{x:s.value.getFretX(r.minFret-1)+4,y:s.value.getStringY(1)-30,style:{"font-size":"48px","font-style":"italic"}},k(r.minFret)+" fr ",9,zt)])):_("",!0),r.marker&&!r.fretless?(l(),i("svg",Dt,[(l(!0),i(p,null,y(x.value,e=>(l(),i("g",null,[e%12!==0?(l(),i("circle",{key:0,cx:s.value.getFretSpaceX(e),cy:s.value.getStringSpaceY(Math.ceil(a.value/2)),r:z},null,8,Nt)):(l(),i("g",Wt,[n("circle",{cx:s.value.getFretSpaceX(e),cy:s.value.getStringSpaceY(Math.ceil(Math.sqrt(a.value-1)-1)),r:z},null,8,Mt),n("circle",{cx:s.value.getFretSpaceX(e),cy:s.value.getStringSpaceY(a.value-Math.ceil(Math.sqrt(a.value-1)-1)),r:z},null,8,Et)]))]))),256))])):_("",!0),(l(),i("svg",null,[(l(!0),i(p,null,y(a.value,e=>(l(),i("line",{x1:s.value.getFretX(0),x2:s.value.getFretX(25),y1:s.value.getStringY(e),y2:s.value.getStringY(e),stroke:"black","stroke-width":4},null,8,At))),256))])),(l(!0),i(p,null,y(h.value,e=>(l(),i("g",null,[n("circle",{cx:e.x,cy:e.y,r:C+4,fill:e.tag.fg},null,8,Ct),n("circle",{cx:e.x,cy:e.y,r:C,fill:e.tag.bg},null,8,Vt),n("text",{x:e.x,y:e.y+12,"text-anchor":"middle",fill:e.tag.fg,stroke:e.tag.fg,style:{"font-size":"36px"}},k(e.tag.tag),9,Ot)]))),256))],8,bt))}}),Lt=["height","width","viewBox"],Tt=["y1","y2","x1","x2"],It={key:0},jt=["y"],Jt=["x1","x2"],Kt={key:1},Pt=["y","x"],Qt={key:2},Rt=["cy","cx"],Zt={key:1},te=["cy","cx"],ee=["cy","cx"],se=["y1","y2","x1","x2"],re=["cx","cy","r","fill"],le=["cx","cy","fill"],ie=["y","x","fill","stroke"],ne=0,ae=80,Y=30,D=20,V=30,oe=N({__name:"ChordDiagram",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass4"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:1},marker:{type:Boolean,default:!0},fretNote:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1},tags:{}},setup(m){const t=m,a=c(()=>s.value.strings),u=c(()=>s.value.frets),g=c(()=>t.height),f=c(()=>t.width),o=c(()=>400/t.scale),d=c(()=>o.value/t.height*t.width),x=c(()=>[3,5,7,9,12,15,17,19,21,24].filter(r=>r>=t.minFret&&r<=t.maxFret)),h=c(()=>(t.tags??[]).map(r=>s.value.getNote(r.string,r.fret,r.tag,r.style))),s=c(()=>new M({width:o.value,height:d.value,instrument:t.instrument,minFret:t.minFret,maxFret:t.maxFret,padX:ne,padY:ae,nutWidth:Y,evenFactor:t.evenFactor,fretless:t.fretless,reverseStrings:!0}));return(r,v)=>(l(),i("svg",{height:g.value,width:f.value,viewBox:"0 0 "+d.value+" "+(o.value+4)},[(l(),i("svg",null,[n("line",{y1:s.value.getFretX(0)-Y/2+4,y2:s.value.getFretX(0)-Y/2+4,x1:s.value.getStringY(1)+2,x2:s.value.getStringY(a.value)-2,stroke:"black","stroke-width":Y},null,8,Tt)])),r.fretless?_("",!0):(l(),i("g",It,[(l(!0),i(p,null,y(u.value,e=>(l(),i("svg",{y:s.value.getFretX(e)},[n("line",{y1:"0",y2:"0",x1:s.value.getStringY(1)+2,x2:s.value.getStringY(a.value)-2,stroke:"black","stroke-width":8},null,8,Jt)],8,jt))),256))])),r.fretNote&&r.minFret>1?(l(),i("g",Kt,[n("text",{y:s.value.getFretX(r.minFret-1)+40,x:s.value.getStringY(a.value)+20,style:{"font-size":"42px","font-style":"italic"}},k(r.minFret)+" fr ",9,Pt)])):_("",!0),r.marker?(l(),i("svg",Qt,[(l(!0),i(p,null,y(x.value,e=>(l(),i("g",null,[e%12!==0?(l(),i("circle",{key:0,cy:s.value.getFretSpaceX(e),cx:s.value.getStringSpaceY(Math.ceil(a.value/2)),r:D},null,8,Rt)):(l(),i("g",Zt,[n("circle",{cy:s.value.getFretSpaceX(e),cx:s.value.getStringSpaceY(Math.ceil(Math.sqrt(a.value-1)-1)),r:D},null,8,te),n("circle",{cy:s.value.getFretSpaceX(e),cx:s.value.getStringSpaceY(a.value-Math.ceil(Math.sqrt(a.value-1)-1)),r:D},null,8,ee)]))]))),256))])):_("",!0),(l(),i("svg",null,[(l(!0),i(p,null,y(a.value,e=>(l(),i("line",{y1:s.value.getFretX(0),y2:s.value.getFretX(25),x1:s.value.getStringY(e),x2:s.value.getStringY(e),stroke:"black","stroke-width":4},null,8,se))),256))])),(l(!0),i(p,null,y(h.value,e=>(l(),i("g",null,[n("circle",{cx:e.y,cy:e.x,r:V+4,fill:e.tag.fg},null,8,re),n("circle",{cx:e.y,cy:e.x,r:V,fill:e.tag.bg},null,8,le),n("text",{y:e.x+12,x:e.y,"text-anchor":"middle",fill:e.tag.fg,stroke:e.tag.fg,style:{"font-size":"36px"}},k(e.tag.tag),9,ie)]))),256))],8,Lt))}}),ue={class:"fixed top-0 left-0 right-0 bottom-0 overflow-y-scroll py-20"},he={class:"max-w-screen-lg mx-auto"},ce={class:"overflow-x-scroll pb-8"},ge={class:"mt-8 flex justify-center space-x-4"},de={class:"mt-12 mx-4 flex flex-wrap justify-center items-center"},pe={title:"Fretboard Demo"},ye={__name:"index.page",setup(m){const t=q({moreStrings:!1,fretless:!1,isEven:!1,marker:!0});return(a,u)=>(l(),i("article",ue,[n("div",he,[n("div",ce,[w(A,{fretless:t.fretless,"even-factor":t.isEven?.8:0,marker:t.marker,instrument:t.moreStrings?"guitar6":"bass4",class:"shadow-gray-500 shadow-lg"},null,8,["fretless","even-factor","marker","instrument"])]),n("div",ge,[n("label",null,[b(n("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=g=>t.moreStrings=g)},null,512),[[S,t.moreStrings]]),X(" more strings ")]),n("label",null,[b(n("input",{type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=g=>t.fretless=g)},null,512),[[S,t.fretless]]),X(" fretless ")]),n("label",null,[b(n("input",{type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=g=>t.isEven=g)},null,512),[[S,t.isEven]]),X(" even fret space ")]),n("label",null,[b(n("input",{type:"checkbox","onUpdate:modelValue":u[3]||(u[3]=g=>t.marker=g)},null,512),[[S,t.marker]]),X(" marker ")])])]),n("div",de,[w(oe,{class:"p-10",height:120,width:200,scale:1.5,"max-fret":3,instrument:"guitar6",marker:!1,tags:[{string:5,fret:3,style:"highlight"},{string:4,fret:2,style:"default"},{string:3,fret:0,style:"default"},{string:2,fret:1,style:"highlight"},{string:1,fret:0,style:"default"}]}),w(Ut,{class:"p-10",height:180,width:300,scale:.8,"min-fret":5,"max-fret":12,instrument:"guitar6",fretless:t.fretless,marker:t.marker,tags:[{string:6,fret:5,style:"highlight"},{string:6,fret:8},{string:5,fret:7},{string:4,fret:5},{string:4,fret:7,style:"highlight"},{string:4,fret:10},{string:3,fret:9},{string:3,fret:12},{string:2,fret:10,style:"highlight"},{string:1,fret:8},{string:1,fret:12}]},null,8,["fretless","marker"]),w(A,{class:"p-10",height:150,width:200,scale:1.2,"min-fret":3,"max-fret":5,fretless:t.fretless,marker:t.marker,tags:[{string:4,fret:3},{string:3,fret:5,style:"highlight"},{string:2,fret:5}]},null,8,["fretless","marker"])])]))}};export{ye as default,pe as frontmatter};
