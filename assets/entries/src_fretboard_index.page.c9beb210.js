import{v as F}from"../chunks/chunk-b46b6e61.js";import{s as $,y as d,t as s,u as r,x as n,F as p,z as v,A as _,B as M,C as A,v as w,D as S,E as k}from"../chunks/chunk-1b8a94fb.js";function Y(m,t){if(!m)throw Error(t)}const C=["C","C#","D","D#","E","F","F#","G","G#","A"],N=["C","Db","D","Eb","E","F","Gb","G","Ab","A"];class D{constructor(t,h,l,c){this.name=t,this.pitch=h||0,this.x=l||0,this.y=c||0}transpose(t,h){let l=this.name.slice(0,-1),c=Number(this.name.slice(-1));const f=h?N:C;let o=f.indexOf(l);for(let g=0;g<t;g++)o=(o+1)%12,o===0&&c++;return f[o]+String(c)}}const V={guitar6:["E2","A2","D3","G3","B3","E4"],guitar7:["B1","E2","A2","D3","G3","B3","E4"],guitarDropD:["D2","A2","D3","G3","B3","E4"],bass4:["E1","A1","D2","G2"],bass5:["B0","E1","A1","D2","G2"],ukulele:["C4","G3","E3","A2"]},O={guitar6:[10,13,17,26,36,46],guitar7:[10,13,17,26,36,46,59],guitarDropD:[10,13,17,26,36,46],bass4:[45,65,80,100],bass5:[45,65,80,100,130],ukulele:[28,32,40,28]};class z{constructor(t){this.svgHeight=t.height,this.svgWidth=t.width,this.tuning=V[t.instrument],this.useFlats=this.tuning.filter(e=>e.includes("b")).length>0,this.stringGauges=t.stringHasWidth?O[t.instrument]:void 0,this.strings=this.tuning.length,this.fretless=!!t.fretless,this.minFret=t.minFret??0,this.maxFret=t.maxFret??24,this.evenFactor=t.evenFactor??0;const h=t.padX??10,l=t.padY??10,c=t.nutWidth??0;Y(this.minFret<this.maxFret,"must contain at least one fret"),this.offsetX=h,this.minFret===0&&(this.offsetX+=c),this.scaleLength=1;const f=this.getFretX(this.minFret),o=this.getFretX(this.maxFret);let g=this.svgWidth-this.offsetX-h;Y(g>10,"svg too small"),this.scaleLength=g/(o-f),this.offsetX-=this.getFretX(this.minFret,0),this.stringY=[];let u=l;const a=this.stringGauges?this.stringGauges.slice(0,this.strings).map(e=>Math.sqrt(e)).reduce((e,y)=>e+y):0;this.stringGap=(this.svgHeight-2*l-a)/(this.strings-1);for(let e=0;e<this.strings;++e)this.stringY.push(u),this.stringGauges&&(u+=Math.sqrt(this.stringGauges[e])),u+=this.stringGap}getFretX(t,h){if(h===void 0&&(h=this.offsetX),this.evenFactor>=.95)return this.scaleLength*.5/12*t+h;const l=.5*this.scaleLength/(1-1/(2-this.evenFactor));return l-l/(2-this.evenFactor)**(t/12)+h}getStringY(t){return this.stringY[t-1]}getFretSpaceX(t){return(this.getFretX(t)+this.getFretX(t-1))/2}getStringSpaceY(t){return this.getStringY(t)+this.stringGap/2}getNote(t,h){const l=this.tuning[this.strings-t],c=this.fretless?this.getFretX(h):this.getFretSpaceX(h),f=this.getStringY(t),o=new D(l).transpose(h,this.useFlats);return new D(o,0,c,f)}}const H=["height","width","viewBox"],U=M('<linearGradient id="board" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#100"></stop><stop offset="0.8%" stop-color="#877"></stop><stop offset="1.6%" stop-color="#402028"></stop><stop offset="98.5%" stop-color="#644"></stop><stop offset="99.5%" stop-color="#988"></stop><stop offset="100%" stop-color="#402028"></stop></linearGradient><filter id="shadow" x="0" y="0" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="0" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter><linearGradient id="box-short" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="8%" stop-color="#bba"></stop><stop offset="95%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="box-long" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="3%" stop-color="#bba"></stop><stop offset="98%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="fret" x1="0" y1="0" x2="100%" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#ccc"></stop><stop offset="100%" stop-color="#888"></stop></linearGradient><linearGradient id="string" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#eee"></stop><stop offset="100%" stop-color="#aaa"></stop></linearGradient>',6),q=["id","height"],L=["height"],j={x:"0"},I=["width","height"],T={key:0},J=["cx","cy"],K={key:1},P=["cx","cy"],Q=["cx","cy"],R={key:1},Z=["cx","cy"],tt={key:1},et=["cx","cy"],st=["cx","cy"],rt={key:2},it=["width","height","x"],lt=["width","height"],nt=["d"],ot=["d"],at={filter:"url(#shadow)"},ut=["y"],ht=["width","height","fill"],ct=["x"],dt=["height","width"],gt=["y","height","width"],ft=["y","height","width"],pt=40,X=40,G=20,x=6,E=$({__name:"FB",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass4"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:0},nutWidth:{default:40},fretSize:{default:10},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1}},setup(m){const t=m,h=[3,5,7,9,12,15,17,19,21,24],l=d(()=>u.value.strings),c=d(()=>t.height),f=d(()=>t.width),o=d(()=>400/t.scale),g=d(()=>o.value/t.height*t.width),u=d(()=>new z({width:g.value,height:o.value,instrument:t.instrument,minFret:t.minFret,maxFret:t.maxFret,padX:pt,padY:X,nutWidth:t.nutWidth,evenFactor:t.evenFactor,stringHasWidth:!0,fretless:t.fretless}));function a(e){let y=u.value.stringGauges[e-1];return Math.sqrt(y)}return(e,y)=>(s(),r("svg",{height:c.value,width:f.value,viewBox:"0 0 "+g.value+" "+o.value},[n("defs",null,[U,(s(!0),r(p,null,v(u.value.strings,i=>(s(),r("pattern",{id:"ring"+i,width:"3",height:a(i),patternUnits:"userSpaceOnUse"},[n("rect",{x:"0",y:"0",width:"3",height:a(i),fill:"url(#string)",stroke:"#333"},null,8,L)],8,q))),256))]),(s(),r("svg",j,[n("rect",{width:g.value,height:o.value,fill:"url(#board)"},null,8,I)])),(s(),r("svg",null,[!e.fretless&&e.marker?(s(),r("svg",T,[(s(),r(p,null,v(h,i=>n("g",null,[i%12!==0?(s(),r("circle",{key:0,cx:u.value.getFretSpaceX(i),cy:o.value/2,r:G,fill:"#ddd"},null,8,J)):(s(),r("g",K,[n("circle",{cx:u.value.getFretSpaceX(i),cy:o.value*.25,r:G,fill:"#ddd"},null,8,P),n("circle",{cx:u.value.getFretSpaceX(i),cy:o.value*.75,r:G,fill:"#ddd"},null,8,Q)]))])),64))])):_("",!0),e.fretless&&e.marker?(s(),r("svg",R,[(s(),r(p,null,v(h,i=>n("g",null,[i%12!==0?(s(),r("circle",{key:0,cx:u.value.getFretX(i),cy:o.value-x-10,r:x,fill:"#ddd"},null,8,Z)):(s(),r("g",tt,[n("circle",{cx:u.value.getFretX(i)-x*2,cy:o.value-x-10,r:x,fill:"#ddd"},null,8,et),n("circle",{cx:u.value.getFretX(i)+x*2,cy:o.value-x-10,r:x,fill:"#ddd"},null,8,st)]))])),64))])):_("",!0),e.fretless?_("",!0):(s(),r("svg",rt,[(s(),r(p,null,v(24,i=>n("svg",{width:e.fretSize,height:o.value,x:u.value.getFretX(i)-e.fretSize/2},[n("rect",{width:e.fretSize,height:o.value,fill:"url(#fret)"},null,8,lt),n("path",{fill:"#ccc",d:"M0,0 C0,10 "+e.fretSize+",10 "+e.fretSize+",0"},null,8,nt),n("path",{fill:"#888",d:"M0,"+o.value+" C0,"+(o.value-10)+" "+e.fretSize+","+(o.value-10)+" "+e.fretSize+","+o.value},null,8,ot)],8,it)),64))]))])),(s(),r("svg",at,[(s(!0),r(p,null,v(u.value.strings,i=>(s(),r("svg",{y:u.value.getStringY(i)},[n("rect",{width:g.value,height:a(i),fill:a(i)>4?"url(#ring"+i+")":"url(#string)"},null,8,ht)],8,ut))),256))])),(s(),r("svg",{x:u.value.offsetX-e.nutWidth},[n("rect",{y:"0",height:X-2,fill:"url(#box-short)",width:e.nutWidth,rx:"5",ry:"5"},null,8,dt),(s(!0),r(p,null,v(l.value-1,i=>(s(),r("rect",{y:u.value.getStringY(i)+a(i)+4,height:u.value.stringGap-8,fill:"url(#box-long)",width:e.nutWidth,rx:"5",ry:"5"},null,8,gt))),256)),n("rect",{y:u.value.getStringY(l.value)+a(l.value)+4,height:X-6,fill:"url(#box-short)",width:e.nutWidth,rx:"5",ry:"5"},null,8,ft)],8,ct))],8,H))}}),vt=["height","width","viewBox"],mt=["x1","x2","y1","y2"],xt={key:0},yt=["x"],_t=["y1","y2"],Ft={key:1},wt=["cx","cy"],St={key:1},kt=["cx","cy"],bt=["cx","cy"],Xt=["x1","x2","y1","y2"],b=30,Gt=40,B=20,W=$({__name:"FBDiagram",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass4"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:1},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1},pad:{type:Boolean,default:!0}},setup(m){const t=m,h=d(()=>t.pad?40:0),l=d(()=>a.value.strings),c=d(()=>t.height),f=d(()=>t.width),o=d(()=>400/t.scale),g=d(()=>o.value/t.height*t.width),u=d(()=>[3,5,7,9,12,15,17,19,21,24].filter(e=>e>=t.minFret&&e<=t.maxFret)),a=d(()=>new z({width:g.value,height:o.value,instrument:t.instrument,minFret:t.minFret,maxFret:t.maxFret,padX:h.value,padY:Gt,nutWidth:b,evenFactor:t.evenFactor,fretless:t.fretless}));return(e,y)=>(s(),r("svg",{height:c.value,width:f.value,viewBox:"0 0 "+g.value+" "+o.value},[(s(),r("svg",null,[n("line",{x1:a.value.getFretX(0)-b/2+4,x2:a.value.getFretX(0)-b/2+4,y1:a.value.getStringY(1)-2,y2:a.value.getStringY(l.value)+2,stroke:"black","stroke-width":b},null,8,mt)])),e.fretless?_("",!0):(s(),r("g",xt,[(s(!0),r(p,null,v(e.maxFret-e.minFret+1,i=>(s(),r("svg",{x:a.value.getFretX(i+e.minFret-1)},[n("line",{x1:"0",x2:"0",y1:a.value.getStringY(1)-2,y2:a.value.getStringY(l.value)+2,stroke:"black","stroke-width":8},null,8,_t)],8,yt))),256))])),e.marker?(s(),r("svg",Ft,[(s(!0),r(p,null,v(u.value,i=>(s(),r("g",null,[i%12!==0?(s(),r("circle",{key:0,cx:a.value.getFretSpaceX(i),cy:a.value.getStringSpaceY(Math.ceil(l.value/2)),r:B},null,8,wt)):(s(),r("g",St,[n("circle",{cx:a.value.getFretSpaceX(i),cy:a.value.getStringSpaceY(Math.ceil(Math.sqrt(l.value-1)-1)),r:B},null,8,kt),n("circle",{cx:a.value.getFretSpaceX(i),cy:a.value.getStringSpaceY(l.value-Math.ceil(Math.sqrt(l.value-1)-1)),r:B},null,8,bt)]))]))),256))])):_("",!0),(s(),r("svg",null,[(s(!0),r(p,null,v(l.value,i=>(s(),r("line",{x1:a.value.getFretX(0),x2:a.value.getFretX(25),y1:a.value.getStringY(i),y2:a.value.getStringY(i),stroke:"black","stroke-width":4},null,8,Xt))),256))]))],8,vt))}}),Bt={class:"fixed top-0 left-0 right-0 bottom-0 overflow-y-scroll py-20"},Yt={class:"max-w-screen-lg mx-auto"},Dt={class:"overflow-x-scroll pb-8"},Et={class:"mt-8 flex justify-center space-x-4"},Wt={class:"mt-12 mx-4 flex flex-wrap justify-center items-center"},Mt={__name:"index.page",setup(m){const t=A({moreStrings:!1,fretless:!1,isEven:!1,marker:!0});return(h,l)=>(s(),r("article",Bt,[n("div",Yt,[n("div",Dt,[w(E,{fretless:t.fretless,"even-factor":t.isEven?.8:0,marker:t.marker,instrument:t.moreStrings?"guitar6":"bass4",class:"shadow-gray-500 shadow-lg"},null,8,["fretless","even-factor","marker","instrument"])]),n("div",Et,[n("label",null,[S(n("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=c=>t.moreStrings=c)},null,512),[[F,t.moreStrings]]),k(" more strings ")]),n("label",null,[S(n("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=c=>t.fretless=c)},null,512),[[F,t.fretless]]),k(" fretless ")]),n("label",null,[S(n("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=c=>t.isEven=c)},null,512),[[F,t.isEven]]),k(" even fret space ")]),n("label",null,[S(n("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=c=>t.marker=c)},null,512),[[F,t.marker]]),k(" marker ")])])]),n("div",Wt,[w(W,{class:"p-6",height:150,width:180,"min-fret":0,"max-fret":3,strings:6,marker:!1,pad:!1}),w(W,{class:"p-6",height:150,width:300,"min-fret":1,"max-fret":6,strings:4}),w(E,{class:"p-6",height:150,width:200,scale:1.2,"min-fret":2,"max-fret":5})])]))}};export{Mt as default};
