import{v as F}from"../chunks/chunk-b46b6e61.js";import{s as M,y as g,t as e,u as s,x as i,F as f,z as p,A as x,B as E,C as O,v as w,D as k,E as S}from"../chunks/chunk-1b8a94fb.js";function X(m,t){if(!m)throw Error(t)}class V{constructor(t){this.svgHeight=t.height,this.svgWidth=t.width,this.strings=t.strings,this.fretless=!!t.fretless,this.tuning=t.tuning||[],this.minFret=t.minFret??0,this.maxFret=t.maxFret??24,this.evenFactor=t.evenFactor??0;const c=t.padX??10,u=t.padY??10,h=t.nutWidth??0;X(this.minFret<this.maxFret,"must contain at least one fret"),this.offsetX=c,this.minFret===0&&(this.offsetX+=h),this.scaleLength=1;const y=this.getFretX(this.minFret),_=this.getFretX(this.maxFret);let a=this.svgWidth-this.offsetX-c;X(a>10,"svg too small"),this.scaleLength=a/(_-y),this.offsetX-=this.getFretX(this.minFret,0),this.stringY=[];let o=u,r=0;t.stringGauges&&(X(t.strings<=t.stringGauges.length,"stringGauges must cover all strings"),r=t.stringGauges.slice(0,t.strings).map(d=>Math.sqrt(d)).reduce((d,l)=>d+l)),this.stringGap=(this.svgHeight-2*u-r)/(t.strings-1);for(let d=0;d<t.strings;++d)this.stringY.push(o),t.stringGauges&&(o+=Math.sqrt(t.stringGauges[d])),o+=this.stringGap}getFretX(t,c){if(c===void 0&&(c=this.offsetX),this.evenFactor>=.95)return this.scaleLength*.5/12*t+c;const u=.5*this.scaleLength/(1-1/(2-this.evenFactor));return u-u/(2-this.evenFactor)**(t/12)+c}getStringY(t){return this.stringY[t-1]}getFretSpaceX(t){return(this.getFretX(t)+this.getFretX(t-1))/2}getStringSpaceY(t){return this.getStringY(t)+this.stringGap/2}getNote(t,c){}}const C=["height","width","viewBox"],N=E('<linearGradient id="board" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#100"></stop><stop offset="0.8%" stop-color="#877"></stop><stop offset="1.6%" stop-color="#402028"></stop><stop offset="98.5%" stop-color="#644"></stop><stop offset="99.5%" stop-color="#988"></stop><stop offset="100%" stop-color="#402028"></stop></linearGradient><filter id="shadow" x="0" y="0" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="0" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter><linearGradient id="box-short" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="8%" stop-color="#bba"></stop><stop offset="95%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="box-long" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="3%" stop-color="#bba"></stop><stop offset="98%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="fret" x1="0" y1="0" x2="100%" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#ccc"></stop><stop offset="100%" stop-color="#888"></stop></linearGradient><linearGradient id="string" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#eee"></stop><stop offset="100%" stop-color="#aaa"></stop></linearGradient>',6),U=["id","height"],q=["height"],L={x:"0"},D=["width","height"],H={key:0},j=["cx","cy"],A={key:1},I=["cx","cy"],T=["cx","cy"],J={key:1},K=["cx","cy"],P={key:1},Q=["cx","cy"],R=["cx","cy"],Z={key:2},tt=["width","height","x"],et=["width","height"],st=["d"],rt=["d"],lt={filter:"url(#shadow)"},it=["y"],ot=["width","height","fill"],nt=["x"],at=["height","width"],ut=["y","height","width"],ht=["y","height","width"],dt=40,G=40,Y=20,v=6,$=M({__name:"FB",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:0},nutWidth:{default:40},fretSize:{default:10},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1}},setup(m){const t=m,c=[3,5,7,9,12,15,17,19,21,24],u={guitar:[9,11,16,24,32,42],bass:[45,65,80,100]},h=g(()=>{var l;return((l=u[t.instrument])==null?void 0:l.length)||4}),y=g(()=>t.height),_=g(()=>t.width),a=g(()=>400/t.scale),o=g(()=>a.value/t.height*t.width),r=g(()=>new V({width:o.value,height:a.value,strings:h.value,minFret:t.minFret,maxFret:t.maxFret,padX:dt,padY:G,nutWidth:t.nutWidth,stringGauges:u[t.instrument],evenFactor:t.evenFactor}));function d(l){let W=u[t.instrument][l-1];return Math.sqrt(W)}return(l,W)=>(e(),s("svg",{height:y.value,width:_.value,viewBox:"0 0 "+o.value+" "+a.value},[i("defs",null,[N,(e(!0),s(f,null,p(r.value.strings,n=>(e(),s("pattern",{id:"ring"+n,width:"3",height:d(n),patternUnits:"userSpaceOnUse"},[i("rect",{x:"0",y:"0",width:"3",height:d(n),fill:"url(#string)",stroke:"#333"},null,8,q)],8,U))),256))]),(e(),s("svg",L,[i("rect",{width:o.value,height:a.value,fill:"url(#board)"},null,8,D)])),(e(),s("svg",null,[!l.fretless&&l.marker?(e(),s("svg",H,[(e(),s(f,null,p(c,n=>i("g",null,[n%12!==0?(e(),s("circle",{key:0,cx:r.value.getFretSpaceX(n),cy:a.value/2,r:Y,fill:"#ddd"},null,8,j)):(e(),s("g",A,[i("circle",{cx:r.value.getFretSpaceX(n),cy:a.value*.25,r:Y,fill:"#ddd"},null,8,I),i("circle",{cx:r.value.getFretSpaceX(n),cy:a.value*.75,r:Y,fill:"#ddd"},null,8,T)]))])),64))])):x("",!0),l.fretless&&l.marker?(e(),s("svg",J,[(e(),s(f,null,p(c,n=>i("g",null,[n%12!==0?(e(),s("circle",{key:0,cx:r.value.getFretX(n),cy:a.value-v-10,r:v,fill:"#ddd"},null,8,K)):(e(),s("g",P,[i("circle",{cx:r.value.getFretX(n)-v*2,cy:a.value-v-10,r:v,fill:"#ddd"},null,8,Q),i("circle",{cx:r.value.getFretX(n)+v*2,cy:a.value-v-10,r:v,fill:"#ddd"},null,8,R)]))])),64))])):x("",!0),l.fretless?x("",!0):(e(),s("svg",Z,[(e(),s(f,null,p(24,n=>i("svg",{width:l.fretSize,height:a.value,x:r.value.getFretX(n)-l.fretSize/2},[i("rect",{width:l.fretSize,height:a.value,fill:"url(#fret)"},null,8,et),i("path",{fill:"#ccc",d:"M0,0 C0,10 "+l.fretSize+",10 "+l.fretSize+",0"},null,8,st),i("path",{fill:"#888",d:"M0,"+a.value+" C0,"+(a.value-10)+" "+l.fretSize+","+(a.value-10)+" "+l.fretSize+","+a.value},null,8,rt)],8,tt)),64))]))])),(e(),s("svg",lt,[(e(!0),s(f,null,p(r.value.strings,n=>(e(),s("svg",{y:r.value.getStringY(n)},[i("rect",{width:o.value,height:d(n),fill:d(n)>4?"url(#ring"+n+")":"url(#string)"},null,8,ot)],8,it))),256))])),(e(),s("svg",{x:r.value.offsetX-l.nutWidth},[i("rect",{y:"0",height:G-2,fill:"url(#box-short)",width:l.nutWidth,rx:"5",ry:"5"},null,8,at),(e(!0),s(f,null,p(h.value-1,n=>(e(),s("rect",{y:r.value.getStringY(n)+d(n)+4,height:r.value.stringGap-8,fill:"url(#box-long)",width:l.nutWidth,rx:"5",ry:"5"},null,8,ut))),256)),i("rect",{y:r.value.getStringY(h.value)+d(h.value)+4,height:G-6,fill:"url(#box-short)",width:l.nutWidth,rx:"5",ry:"5"},null,8,ht)],8,nt))],8,C))}}),ct=["height","width","viewBox"],gt=["x1","x2","y1","y2"],ft={key:0},pt=["x"],vt=["y1","y2"],mt={key:1},yt=["cx","cy"],_t={key:1},xt=["cx","cy"],Ft=["cx","cy"],wt=["x1","x2","y1","y2"],b=30,kt=40,B=20,z=M({__name:"FBDiagram",props:{width:{default:1500},height:{default:200},scale:{default:1},strings:{default:4},minFret:{default:0},maxFret:{default:24},evenFactor:{default:1},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1},pad:{type:Boolean,default:!0}},setup(m){const t=m,c=g(()=>t.pad?40:0),u=g(()=>t.height),h=g(()=>t.width),y=g(()=>400/t.scale),_=g(()=>y.value/t.height*t.width),a=g(()=>[3,5,7,9,12,15,17,19,21,24].filter(r=>r>=t.minFret&&r<=t.maxFret)),o=g(()=>new V({width:_.value,height:y.value,strings:t.strings,minFret:t.minFret,maxFret:t.maxFret,padX:c.value,padY:kt,nutWidth:b,evenFactor:t.evenFactor}));return(r,d)=>(e(),s("svg",{height:u.value,width:h.value,viewBox:"0 0 "+_.value+" "+y.value},[(e(),s("svg",null,[i("line",{x1:o.value.getFretX(0)-b/2+4,x2:o.value.getFretX(0)-b/2+4,y1:o.value.getStringY(1)-2,y2:o.value.getStringY(r.strings)+2,stroke:"black","stroke-width":b},null,8,gt)])),r.fretless?x("",!0):(e(),s("g",ft,[(e(!0),s(f,null,p(r.maxFret-r.minFret+1,l=>(e(),s("svg",{x:o.value.getFretX(l+r.minFret-1)},[i("line",{x1:"0",x2:"0",y1:o.value.getStringY(1)-2,y2:o.value.getStringY(r.strings)+2,stroke:"black","stroke-width":8},null,8,vt)],8,pt))),256))])),r.marker?(e(),s("svg",mt,[(e(!0),s(f,null,p(a.value,l=>(e(),s("g",null,[l%12!==0?(e(),s("circle",{key:0,cx:o.value.getFretSpaceX(l),cy:o.value.getStringSpaceY(Math.ceil(r.strings/2)),r:B},null,8,yt)):(e(),s("g",_t,[i("circle",{cx:o.value.getFretSpaceX(l),cy:o.value.getStringSpaceY(Math.ceil(Math.sqrt(r.strings-1)-1)),r:B},null,8,xt),i("circle",{cx:o.value.getFretSpaceX(l),cy:o.value.getStringSpaceY(r.strings-Math.ceil(Math.sqrt(r.strings-1)-1)),r:B},null,8,Ft)]))]))),256))])):x("",!0),(e(),s("svg",null,[(e(!0),s(f,null,p(r.strings,l=>(e(),s("line",{x1:o.value.getFretX(0),x2:o.value.getFretX(25),y1:o.value.getStringY(l),y2:o.value.getStringY(l),stroke:"black","stroke-width":4},null,8,wt))),256))]))],8,ct))}}),St={class:"fixed top-0 left-0 right-0 bottom-0 overflow-y-scroll py-20"},bt={class:"max-w-screen-lg mx-auto"},Xt={class:"overflow-x-scroll pb-8"},Gt={class:"mt-8 flex justify-center space-x-4"},Yt={class:"mt-12 mx-4 flex flex-wrap justify-center items-center"},$t={__name:"index.page",setup(m){const t=O({moreStrings:!1,fretless:!1,isEven:!1,marker:!0});return(c,u)=>(e(),s("article",St,[i("div",bt,[i("div",Xt,[w($,{fretless:t.fretless,"even-factor":t.isEven?.8:0,marker:t.marker,instrument:t.moreStrings?"guitar":"bass",class:"shadow-gray-500 shadow-lg"},null,8,["fretless","even-factor","marker","instrument"])]),i("div",Gt,[i("label",null,[k(i("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=h=>t.moreStrings=h)},null,512),[[F,t.moreStrings]]),S(" more strings ")]),i("label",null,[k(i("input",{type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=h=>t.fretless=h)},null,512),[[F,t.fretless]]),S(" fretless ")]),i("label",null,[k(i("input",{type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=h=>t.isEven=h)},null,512),[[F,t.isEven]]),S(" even fret space ")]),i("label",null,[k(i("input",{type:"checkbox","onUpdate:modelValue":u[3]||(u[3]=h=>t.marker=h)},null,512),[[F,t.marker]]),S(" marker ")])])]),i("div",Yt,[w(z,{class:"p-6",height:150,width:180,"min-fret":0,"max-fret":3,strings:6,marker:!1,pad:!1}),w(z,{class:"p-6",height:150,width:300,"min-fret":1,"max-fret":6,strings:4}),w($,{class:"p-6",height:150,width:200,scale:1.2,"min-fret":2,"max-fret":5})])]))}};export{$t as default};
