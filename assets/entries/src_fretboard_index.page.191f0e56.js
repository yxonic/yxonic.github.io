import{v as F}from"../chunks/chunk-e9712b77.js";import{s as M,y as g,t as s,u as r,x as l,F as f,z as p,A as x,B as E,C as O,v as w,D as k,E as S}from"../chunks/chunk-3f35ad78.js";function X(m,t){if(!m)throw Error(t)}class V{constructor(t){this.svgHeight=t.height,this.svgWidth=t.width,this.strings=t.strings,this.minFret=t.minFret??0,this.maxFret=t.maxFret??24,this.evenFactor=t.evenFactor??0;const c=t.padX??10,h=t.padY??10,u=t.nutWidth??0;X(this.minFret<this.maxFret,"must contain at least one fret"),this.offsetX=c,this.minFret===0&&(this.offsetX+=u),this.scaleLength=1;const y=this.getFretX(this.minFret),_=this.getFretX(this.maxFret);let e=this.svgWidth-this.offsetX-c;X(e>10,"svg too small"),this.scaleLength=e/(_-y),this.offsetX-=this.getFretX(this.minFret,0),this.stringY=[];let i=h,d=0;t.stringGauges&&(X(t.strings<=t.stringGauges.length,"stringGauges must cover all strings"),d=t.stringGauges.slice(0,t.strings).map(o=>Math.sqrt(o)).reduce((o,n)=>o+n)),this.stringGap=(this.svgHeight-2*h-d)/(t.strings-1);for(let o=0;o<t.strings;++o)this.stringY.push(i),t.stringGauges&&(i+=Math.sqrt(t.stringGauges[o])),i+=this.stringGap}getFretX(t,c){if(c===void 0&&(c=this.offsetX),this.evenFactor>=.95)return this.scaleLength*.5/12*t+c;const h=.5*this.scaleLength/(1-1/(2-this.evenFactor));return h-h/(2-this.evenFactor)**(t/12)+c}getStringY(t){return this.stringY[t-1]}getFretSpaceX(t){return(this.getFretX(t)+this.getFretX(t-1))/2}getStringSpaceY(t){return this.getStringY(t)+this.stringGap/2}}const C=["height","width","viewBox"],U=E('<linearGradient id="board" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#100"></stop><stop offset="0.8%" stop-color="#877"></stop><stop offset="1.6%" stop-color="#402028"></stop><stop offset="98.5%" stop-color="#644"></stop><stop offset="99.5%" stop-color="#988"></stop><stop offset="100%" stop-color="#402028"></stop></linearGradient><filter id="shadow" x="0" y="0" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="0" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter><linearGradient id="box-short" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="8%" stop-color="#bba"></stop><stop offset="95%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="box-long" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#332"></stop><stop offset="3%" stop-color="#bba"></stop><stop offset="98%" stop-color="#bba"></stop><stop offset="100%" stop-color="#ddc"></stop></linearGradient><linearGradient id="fret" x1="0" y1="0" x2="100%" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#ccc"></stop><stop offset="100%" stop-color="#888"></stop></linearGradient><linearGradient id="string" x1="0" y1="100%" x2="0" y2="0"><stop offset="0%" stop-color="#000"></stop><stop offset="50%" stop-color="#eee"></stop><stop offset="100%" stop-color="#aaa"></stop></linearGradient>',6),q=["id","height"],L=["height"],N={x:"0"},D=["width","height"],H={key:0},j=["cx","cy"],A={key:1},I=["cx","cy"],T=["cx","cy"],J={key:1},K=["cx","cy"],P={key:1},Q=["cx","cy"],R=["cx","cy"],Z={key:2},tt=["width","height","x"],et=["width","height"],st=["d"],rt=["d"],lt={filter:"url(#shadow)"},it=["y"],ot=["width","height","fill"],nt=["x"],at=["height","width"],ht=["y","height","width"],ut=["y","height","width"],dt=40,G=40,Y=20,v=6,$=M({__name:"FB",props:{width:{default:1500},height:{default:200},scale:{default:1},instrument:{default:"bass"},minFret:{default:0},maxFret:{default:24},evenFactor:{default:0},nutWidth:{default:40},fretSize:{default:10},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1}},setup(m){const t=m,c=[3,5,7,9,12,15,17,19,21,24],h={guitar:[9,11,16,24,32,42],bass:[45,65,80,100]},u=g(()=>{var n;return((n=h[t.instrument])==null?void 0:n.length)||4}),y=g(()=>t.height),_=g(()=>t.width),e=g(()=>400/t.scale),i=g(()=>e.value/t.height*t.width),d=g(()=>new V({width:i.value,height:e.value,strings:u.value,minFret:t.minFret,maxFret:t.maxFret,padX:dt,padY:G,nutWidth:t.nutWidth,stringGauges:h[t.instrument],evenFactor:t.evenFactor}));function o(n){let W=h[t.instrument][n-1];return Math.sqrt(W)}return(n,W)=>(s(),r("svg",{height:y.value,width:_.value,viewBox:"0 0 "+i.value+" "+e.value},[l("defs",null,[U,(s(!0),r(f,null,p(d.value.strings,a=>(s(),r("pattern",{id:"ring"+a,width:"3",height:o(a),patternUnits:"userSpaceOnUse"},[l("rect",{x:"0",y:"0",width:"3",height:o(a),fill:"url(#string)",stroke:"#333"},null,8,L)],8,q))),256))]),(s(),r("svg",N,[l("rect",{width:i.value,height:e.value,fill:"url(#board)"},null,8,D)])),(s(),r("svg",null,[!n.fretless&&n.marker?(s(),r("svg",H,[(s(),r(f,null,p(c,a=>l("g",null,[a%12!==0?(s(),r("circle",{key:0,cx:d.value.getFretSpaceX(a),cy:e.value/2,r:Y,fill:"#ddd"},null,8,j)):(s(),r("g",A,[l("circle",{cx:d.value.getFretSpaceX(a),cy:e.value*.25,r:Y,fill:"#ddd"},null,8,I),l("circle",{cx:d.value.getFretSpaceX(a),cy:e.value*.75,r:Y,fill:"#ddd"},null,8,T)]))])),64))])):x("",!0),n.fretless&&n.marker?(s(),r("svg",J,[(s(),r(f,null,p(c,a=>l("g",null,[a%12!==0?(s(),r("circle",{key:0,cx:d.value.getFretX(a),cy:e.value-v-10,r:v,fill:"#ddd"},null,8,K)):(s(),r("g",P,[l("circle",{cx:d.value.getFretX(a)-v*2,cy:e.value-v-10,r:v,fill:"#ddd"},null,8,Q),l("circle",{cx:d.value.getFretX(a)+v*2,cy:e.value-v-10,r:v,fill:"#ddd"},null,8,R)]))])),64))])):x("",!0),n.fretless?x("",!0):(s(),r("svg",Z,[(s(),r(f,null,p(24,a=>l("svg",{width:n.fretSize,height:e.value,x:d.value.getFretX(a)-n.fretSize/2},[l("rect",{width:n.fretSize,height:e.value,fill:"url(#fret)"},null,8,et),l("path",{fill:"#ccc",d:"M0,0 C0,10 "+n.fretSize+",10 "+n.fretSize+",0"},null,8,st),l("path",{fill:"#888",d:"M0,"+e.value+" C0,"+(e.value-10)+" "+n.fretSize+","+(e.value-10)+" "+n.fretSize+","+e.value},null,8,rt)],8,tt)),64))]))])),(s(),r("svg",lt,[(s(!0),r(f,null,p(d.value.strings,a=>(s(),r("svg",{y:d.value.getStringY(a)},[l("rect",{width:i.value,height:o(a),fill:o(a)>4?"url(#ring"+a+")":"url(#string)"},null,8,ot)],8,it))),256))])),(s(),r("svg",{x:d.value.offsetX-n.nutWidth},[l("rect",{y:"0",height:G-2,fill:"url(#box-short)",width:n.nutWidth,rx:"5",ry:"5"},null,8,at),(s(!0),r(f,null,p(u.value-1,a=>(s(),r("rect",{y:d.value.getStringY(a)+o(a)+4,height:d.value.stringGap-8,fill:"url(#box-long)",width:n.nutWidth,rx:"5",ry:"5"},null,8,ht))),256)),l("rect",{y:d.value.getStringY(u.value)+o(u.value)+4,height:G-6,fill:"url(#box-short)",width:n.nutWidth,rx:"5",ry:"5"},null,8,ut)],8,nt))],8,C))}}),ct=["height","width","viewBox"],gt=["x1","x2","y1","y2","stroke-width"],ft={key:0},pt=["x"],vt=["y1","y2"],mt={key:1},yt=["cx","cy"],_t={key:1},xt=["cx","cy"],Ft=["cx","cy"],wt=["x1","x2","y1","y2"],b=15,kt=40,St=40,B=20,z=M({__name:"FBDiagram",props:{width:{default:1500},height:{default:200},scale:{default:1},strings:{default:4},minFret:{default:0},maxFret:{default:24},evenFactor:{default:0},marker:{type:Boolean,default:!0},fretless:{type:Boolean,default:!1}},setup(m){const t=m,c=g(()=>t.height),h=g(()=>t.width),u=g(()=>400/t.scale),y=g(()=>u.value/t.height*t.width),_=g(()=>[3,5,7,9,12,15,17,19,21,24].filter(i=>i>=t.minFret&&i<=t.maxFret)),e=g(()=>new V({width:y.value,height:u.value,strings:t.strings,minFret:t.minFret,maxFret:t.maxFret,padX:kt,padY:St,nutWidth:b,evenFactor:t.evenFactor}));return(i,d)=>(s(),r("svg",{height:c.value,width:h.value,viewBox:"0 0 "+y.value+" "+u.value},[(s(),r("svg",null,[l("line",{x1:e.value.getFretX(0)-b,x2:e.value.getFretX(0)-b,y1:e.value.getStringY(1)-2,y2:e.value.getStringY(i.strings)+2,stroke:"black","stroke-width":b*2},null,8,gt)])),i.fretless?x("",!0):(s(),r("g",ft,[(s(!0),r(f,null,p(i.maxFret-i.minFret,o=>(s(),r("svg",{x:e.value.getFretX(o+i.minFret)},[l("line",{x1:"0",x2:"0",y1:e.value.getStringY(1),y2:e.value.getStringY(i.strings),stroke:"black","stroke-width":8},null,8,vt)],8,pt))),256))])),i.marker?(s(),r("svg",mt,[(s(!0),r(f,null,p(_.value,o=>(s(),r("g",null,[o%12!==0?(s(),r("circle",{key:0,cx:e.value.getFretSpaceX(o),cy:e.value.getStringSpaceY(Math.ceil(i.strings/2)),r:B},null,8,yt)):(s(),r("g",_t,[l("circle",{cx:e.value.getFretSpaceX(o),cy:e.value.getStringSpaceY(Math.ceil(Math.sqrt(i.strings-1)-1)),r:B},null,8,xt),l("circle",{cx:e.value.getFretSpaceX(o),cy:e.value.getStringSpaceY(i.strings-Math.ceil(Math.sqrt(i.strings-1)-1)),r:B},null,8,Ft)]))]))),256))])):x("",!0),(s(),r("svg",null,[(s(!0),r(f,null,p(i.strings,o=>(s(),r("line",{x1:e.value.getFretX(0),x2:e.value.getFretX(25),y1:e.value.getStringY(o),y2:e.value.getStringY(o),stroke:"black","stroke-width":4},null,8,wt))),256))]))],8,ct))}}),bt={class:"fixed top-0 left-0 right-0 bottom-0 overflow-y-scroll py-20"},Xt={class:"max-w-screen-lg mx-auto"},Gt={class:"overflow-x-scroll pb-8"},Yt={class:"mt-8 flex justify-center space-x-4"},Bt={class:"mt-12 mx-4 flex flex-wrap justify-center items-center"},zt={__name:"index.page",setup(m){const t=O({moreStrings:!1,fretless:!1,isEven:!1,marker:!0});return(c,h)=>(s(),r("article",bt,[l("div",Xt,[l("div",Gt,[w($,{fretless:t.fretless,"even-factor":t.isEven?.8:0,marker:t.marker,instrument:t.moreStrings?"guitar":"bass",class:"shadow-gray-500 shadow-lg"},null,8,["fretless","even-factor","marker","instrument"])]),l("div",Yt,[l("label",null,[k(l("input",{type:"checkbox","onUpdate:modelValue":h[0]||(h[0]=u=>t.moreStrings=u)},null,512),[[F,t.moreStrings]]),S(" more strings ")]),l("label",null,[k(l("input",{type:"checkbox","onUpdate:modelValue":h[1]||(h[1]=u=>t.fretless=u)},null,512),[[F,t.fretless]]),S(" fretless ")]),l("label",null,[k(l("input",{type:"checkbox","onUpdate:modelValue":h[2]||(h[2]=u=>t.isEven=u)},null,512),[[F,t.isEven]]),S(" even fret space ")]),l("label",null,[k(l("input",{type:"checkbox","onUpdate:modelValue":h[3]||(h[3]=u=>t.marker=u)},null,512),[[F,t.marker]]),S(" marker ")])])]),l("div",Bt,[w(z,{class:"p-6",height:150,width:200,"min-fret":0,"max-fret":3,strings:6,"even-factor":0,marker:!1}),w(z,{class:"p-6",height:150,width:200,"min-fret":1,"max-fret":6,strings:4,"even-factor":1}),w($,{class:"p-6",height:150,width:200,scale:1.2,"even-factor":1,"min-fret":2,"max-fret":5})])]))}};export{zt as default};
